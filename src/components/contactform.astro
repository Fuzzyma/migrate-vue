---
import Button from "./ui/button.astro";
---

<form
  method="POST"
  id="form"
  data-netlify="true"
  netlify-honeypot="botcheck"
  name="contact"
  action="/form-submitted">
  <input type="checkbox" class="hidden" name="botcheck" />
  <div class="mb-5">
    <input
      type="text"
      placeholder="Full Name"
      required
      class="w-full px-4 py-3 border-2 placeholder:text-gray-800 rounded-md outline-none focus:ring-4 border-gray-300 focus:border-gray-600 ring-gray-100"
      name="name"
    />
  </div>
  <div class="mb-5">
    <label for="email_address" class="sr-only">Email Address</label><input
      id="email_address"
      type="email"
      placeholder="Email Address"
      name="email"
      required
      class="w-full px-4 py-3 border-2 placeholder:text-gray-800 rounded-md outline-none focus:ring-4 border-gray-300 focus:border-gray-600 ring-gray-100"
    />
  </div>
  <div class="mb-5 relative">
    <label for="subject" class="absolute -top-3 left-2 bg-white p-1 text-sm">
      Subject
    </label>
    <select
      id="subject"
      name="subject"
      class="bg-white w-full px-4 py-3 border-2 placeholder:text-gray-800 rounded-md outline-none focus:ring-4 border-gray-300 focus:border-gray-600 ring-gray-100">
      <option value="general">General Enquiry</option>
      <option value="assessment">Get a quote</option>
      <option value="hire">Hire per hour</option>
    </select>
  </div>
  <div class="mb-3">
    <!-- prettier-ignore -->
    <textarea
      name="message"
      required
      placeholder="Your Message"
      class="w-full px-4 py-3 border-2 placeholder:text-gray-800 rounded-md outline-none h-36 focus:ring-4 border-gray-300 focus:border-gray-600 ring-gray-100"></textarea>
  </div>
  <Button type="submit" size="lg" block>Send Message</Button>
  <div id="result" class="mt-3 text-center"></div>
</form>

<script is:inline>
  const wantsQuote = document.location.hash === "#quote";
  const wantsHire = document.location.hash === "#hire";

  document.getElementById("subject").value = wantsQuote
    ? "assessment"
    : wantsHire
      ? "hire"
      : "general";
</script>
